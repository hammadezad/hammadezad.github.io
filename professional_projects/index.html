<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Professional Projects — Hammad Ezad</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root{
      --bg:#0b1220; --card:#0f172a; --text:#e5e7eb; --muted:#94a3b8;
      --border:#1f2a44; --primary:#2563eb; --accent:#38bdf8;
      --chip:#0b2244;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Arial,sans-serif}

    /* Top nav */
    .nav{position:sticky;top:0;z-index:50;background:rgba(15,23,42,.75);
         backdrop-filter:saturate(140%) blur(10px);border-bottom:1px solid var(--border)}
    .nav-inner{max-width:1200px;margin:0 auto;padding:12px 16px;display:flex;justify-content:space-between;align-items:center}
    .nav a{color:#cbd5e1;text-decoration:none;font-weight:800}
    .nav a:hover{color:#fff}

    /* Hero */
    .hero{background:linear-gradient(90deg,#6a11cb 0%,#2575fc 100%);color:#fff;padding:36px 0 30px}
    .hero-inner{max-width:1200px;margin:0 auto;padding:0 16px}
    .title{font-size:1.9rem;font-weight:900;margin:0}
    .subtitle{margin:6px 0 0;color:#eef2ff;opacity:.92}

    /* Main */
    .container{max-width:1200px;margin:0 auto;padding:22px 16px 70px}
    .toolbar{display:flex;gap:12px;align-items:center;margin-bottom:18px;flex-wrap:wrap}
    .search{flex:1;min-width:230px;background:#0a1328;color:#fff;border:1px solid var(--border);border-radius:12px;padding:10px 12px}
    .select{background:#0a1328;color:#fff;border:1px solid var(--border);border-radius:12px;padding:10px 12px}

    /* Grid + Cards */
    .grid{display:grid;gap:18px;grid-template-columns:repeat(3,1fr)}
    @media (max-width:1100px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:720px){.grid{grid-template-columns:1fr}}
    .card-link{display:block;text-decoration:none;color:inherit}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden;box-shadow:0 8px 24px #0002;transition:.18s transform,.18s box-shadow,.18s border-color}
    .card:hover{transform:translateY(-4px);box-shadow:0 14px 36px #0003;border-color:var(--accent)}
    .cover{width:100%;height:180px;object-fit:cover;display:block;background:#0b1220;border-bottom:1px solid var(--border)}
    .content{padding:14px 16px}
    .name{margin:0 0 6px 0;font-size:1.12rem;color:#dbeafe;font-weight:800;letter-spacing:.2px}
    .summary{margin:0;color:#cbd5e1;line-height:1.45;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;min-height:42px}
    .footer{display:flex;justify-content:flex-start;gap:10px;margin-top:12px}
    .chip{background:var(--chip);border:1px solid var(--border);color:#c7d2fe;padding:5px 10px;border-radius:999px;font-weight:800;font-size:.78rem}
    .status{margin-top:20px;color:var(--muted);text-align:center}

    .error{background:#7f1d1d;color:#fecaca;border:1px solid #b91c1c;padding:10px 12px;border-radius:10px;margin-bottom:14px;font-weight:700}
  </style>
</head>
<body>
  <!-- Nav -->
  <nav class="nav">
    <div class="nav-inner">
      <a href="../index.html">← Back to Home</a>
      <a href="../Hammad_Ezad_CV.pdf" target="_blank" rel="noreferrer"><i class="fa fa-file-arrow-down"></i> Resume</a>
    </div>
  </nav>

  <!-- Hero -->
  <section class="hero">
    <div class="hero-inner">
      <h1 class="title">Professional Projects</h1>
      <p class="subtitle">Production case studies across optimization, GenAI, and applied ML. Click a card to open the full case study.</p>
    </div>
  </section>

  <!-- Main -->
  <main class="container">
    <div id="error" class="error" style="display:none;"></div>

    <div class="toolbar">
      <input id="q" class="search" type="search" placeholder="Search title or tech (e.g., Gurobi, Salesforce, XGBoost)"/>
      <select id="sort" class="select" aria-label="Sort">
        <option value="custom">Original Order</option>
        <option value="title">Sort by Title</option>
      </select>
    </div>

    <div id="grid" class="grid" aria-live="polite"></div>
    <div id="status" class="status"></div>
  </main>

  <script>
    const grid   = document.getElementById('grid');
    const status = document.getElementById('status');
    const q      = document.getElementById('q');
    const sortSel= document.getElementById('sort');
    const errorB = document.getElementById('error');
    let projects = [];

    async function loadProjects(){
      const res = await fetch('./projects.json', { cache: 'no-store' });
      if(!res.ok) throw new Error(`HTTP ${res.status} loading ./projects.json`);
      return res.json();
    }

    function showError(msg){
      errorB.textContent = msg;
      errorB.style.display = '';
    }

    function projectCard(p){
      // anchor wraps the whole card for keyboard + accessibility
      const a = document.createElement('a');
      a.className = 'card-link';
      a.href = p.explanation || '#';
      a.setAttribute('aria-label', `Open case study: ${p.title}`);

      const card = document.createElement('article');
      card.className = 'card';

      const img = document.createElement('img');
      img.className = 'cover';
      img.alt = p.title || 'Project cover';
      img.loading = 'lazy';
      img.src = p.cover || '';
      card.appendChild(img);

      const c = document.createElement('div');
      c.className = 'content';
      c.innerHTML = `
        <h3 class="name">${p.title || ''}</h3>
        <p class="summary">${p.summary || ''}</p>
      `;
      card.appendChild(c);

      // optional tech chips
      if (p.tech) {
        const footer = document.createElement('div');
        footer.className = 'footer';
        p.tech.split(',').slice(0,3).forEach(t=>{
          const span = document.createElement('span');
          span.className = 'chip';
          span.textContent = t.trim();
          footer.appendChild(span);
        });
        c.appendChild(footer);
      }

      a.appendChild(card);
      return a;
    }

    function render(list){
      grid.innerHTML = '';
      list.forEach(p => grid.appendChild(projectCard(p)));
      status.textContent = list.length ? '' : 'No projects match your search.';
    }

    function filterAndSort(){
      const text = (q.value || '').toLowerCase();
      let filtered = projects.filter(p=>{
        const hay = [p.title||'', p.summary||'', p.tech||''].join(' ').toLowerCase();
        return hay.includes(text);
      });
      if (sortSel.value === 'title') {
        filtered.sort((a,b)=> (a.title||'').localeCompare(b.title||''));
      }
      render(filtered);
    }

    async function init(){
      try{
        projects = await loadProjects();
        render(projects);
        q.addEventListener('input', filterAndSort);
        sortSel.addEventListener('change', filterAndSort);
      }catch(err){
        console.error(err);
        showError('Unable to load projects. Verify professional_projects/projects.json exists and has valid JSON.');
      }
    }
    init();
  </script>
</body>
</html>
